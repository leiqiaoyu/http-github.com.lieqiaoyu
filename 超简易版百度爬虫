from urllib import request

# 定义变量：URL 与 headers

url = 'http://httpbin.org/get' #向测试网站发送请求

#重构请求头，伪装成 Mac火狐浏览器访问，可以使用上表中任意浏览器的UA信息

headers = {

'User-Agent':'Mozilla/5.0 (Macintosh; Intel Mac OS X 10.12; rv:65.0) Gecko/20100101 Firefox/65.0'}

# 1、创建请求对象，包装ua信息

req = request.Request(url=url,headers=headers)

# 2、发送请求，获取响应对象

res = request.urlopen(req)

# 3、提取响应内容

html = res.read().decode('utf-8')

from urllib import request 

from urllib import parse

 

# 拼接URL地址 

def get_url(word): 

  url = 'http://www.baidu.com/s?{}'     #网址

#此处使用urlencode()进行编码 

  params = parse.urlencode({'wd':word}) 

  url = url.format(params) 

  return url   

 

# 发请求,保存本地文件

def request_url(url,filename):

  headers = {'User-Agent':'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:6.0) Gecko/20100101 Firefox/6.0'}

  # 请求对象 + 响应对象 + 提取内容

  req = request.Request(url=url,headers=headers)

  res = request.urlopen(req)

  html = res.read().decode('utf-8')

  # 保存文件至本地

  with open(filename,'w',encoding='utf-8') as f:

    f.write(html)

    

  # 主程序入口

if __name__ == '__main__':

  word = input('(本程序稍作修改可用于其他爬虫）请输入搜索内容:')

  url = get_url(word)

  filename = word + '.html'

  request_url(url,filename)
